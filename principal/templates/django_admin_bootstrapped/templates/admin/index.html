<!-- Archivo modificado  -->
{% extends "admin/base_site.html" %}
{% load i18n admin_static bootstrapped_goodies_tags %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/dashboard.css" %}" />
<link rel="stylesheet" type="text/css" href="/static/admin/css/changelists.css">
{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}dashboard{% endblock %}

{% block breadcrumbs %}
{% endblock %}

{% block object-tools %}
<ul class="nav">
    {% for app in app_list %}
        {% for model in app.models %}
    <li class="dropdown">
            {% if model.admin_url %}
                <a href="#" id='{{model.name|cut:" "}}'>{{ model.name }}</a>
            {% else %}
                {{ model.name }}
            {% endif %}
        </a>
    </li>
        {% endfor %}
    {% endfor %}
</ul>
{% endblock %}


{% block content %}
<div id="content-main">
    <ul class="breadcrumb">
        <li>{% trans 'Home' %}</li>
    </ul>
    <h1>Bienvenido al administrador del Sitio de Pueblos Fundacionales.</h1>
    <h2>Haga clic en alguna de las opciones del menu para proceder.</h2>
</div>
{% endblock %}

{% block sidebar %}
<!-- Modal -->
<div id="modal_sitio" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="titulo-modal">Encabezado de la ventana emergente</h3>
  </div>
  <div id='cuerpo-modal' class="modal-body">
    <p>Ejemplo de una ventana modal</p>
  </div>
  <div class="modal-footer">
    <button id='boton-aceptar' class="btn btn-primary">Aceptar</button>
  </div>
</div>
<script type="text/javascript">
    $(function(){
        $('#boton-aceptar').on('click',cerrar)
        function cerrar(e)
        {
            $('#modal_sitio').modal('hide');
        }

        {% for app in app_list %} {% for model in app.models %}
        $('#{{model.name|cut:" "}}').on('click',cargar);
        {% endfor %}{% endfor %}
        function cargar(e)
        {
            var ruta;
            {% for app in app_list %} {% for model in app.models %}
            if(e.target.id=='{{model.name|cut:" "}}')
            {
                ruta='{{model.admin_url}}';
            }
            {% endfor %}{% endfor %}

            if(ruta!='')
            {
                $.ajax({
                    async:false,
                    url:ruta,
                    data:{csrfmiddlewaretoken:'{{csrf_token}}'},
                    type:'POST',
                    //dataType:
                    success:function(response)
                    {
                        if(response!='')
                        {
                            $('body').removeClass();
                            $('body').addClass('_change-list')
                            $('#content-main').hide(500,function()
                                {
                                    $('#content-main').html(response);
                                    $('#content-main').show(1000);
                                });
                            //class:_change-list
                            //class: dashboard
                        }
                        else
                        {
                            alert('No hubo respuesta por parte del servidor.');
                        }
                    },
                    error:function(jqXHR, status, error)
                    {
                        alert(jqXHR.responseText+'\n'+status+'\n'+ error);
                    },
                    // complete:function(jqXHR, status)
                    // {
                    //     alert(jqXHR.responseText+'\n'+status)
                    // },
                });
            }
            else
            {
                alert('Error inesperado al tratar de cargar el modulo deseado. Consulte a su administrador.')
            }
        }
    });
</script>
<script type="text/javascript" src="/admin/jsi18n/"></script>
<script type="text/javascript" src="/static/admin/js/core.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.init.js"></script>
<script type="text/javascript" src="/static/admin/js/actions.js"></script>
<script type="text/javascript">
(function($) {
    $(document).ready(function($) {
        $("tr input.action-select").actions();
    });
})(django.jQuery);
</script>
{% endblock %}
